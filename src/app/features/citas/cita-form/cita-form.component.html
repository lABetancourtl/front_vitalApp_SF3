<div class="container mt-4">
  <h3>Agendar Nueva Cita</h3>

  <form (ngSubmit)="agendar()" #form="ngForm" class="mt-3">
    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Paciente ID</label>
        <input
          type="number"
          class="form-control"
          [(ngModel)]="cita.paciente_id"
          name="paciente_id"
          placeholder="ID del paciente"
          required
        />
      </div>

      <div class="col-md-6">
        <label class="form-label">Especialidad</label>
        <select
          class="form-select"
          [(ngModel)]="especialidadSeleccionada"
          name="especialidad"
          (change)="cargarMedicosPorEspecialidad()"
          required
        >
          <option value="" disabled selected>Seleccione una especialidad</option>
          <option *ngFor="let e of especialidades" [value]="e">{{ e }}</option>
        </select>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">MÃ©dico</label>
        <select
          class="form-select"
          [(ngModel)]="cita.medico_id"
          name="medico_id"
          required
        >
          <option value="" disabled selected>Seleccione un mÃ©dico</option>
          <option *ngFor="let m of medicosFiltrados" [value]="m.id">
            {{ m.especialidad }} (ID: {{ m.id }})
          </option>
        </select>
      </div>

      <div class="col-md-6">
        <label class="form-label">Fecha y hora</label>
        <input
          type="datetime-local"
          class="form-control"
          [(ngModel)]="cita.fecha_cita"
          name="fecha_cita"
          required
        />
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Motivo de la cita</label>
      <textarea
        class="form-control"
        [(ngModel)]="cita.motivo"
        name="motivo"
        rows="3"
        placeholder="Describe el motivo de la cita"
        required
      ></textarea>
    </div>

    <div class="d-flex gap-2">
      <button class="btn btn-success" type="submit" [disabled]="form.invalid">
        ðŸ’¾ Agendar Cita
      </button>
      <a routerLink="/citas" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>
